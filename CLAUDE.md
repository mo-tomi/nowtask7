# Claude Code ルール
作成日：2025年10月22日

## docs フォルダについて
**重要：docs フォルダ内のファイルに対しては以下のルールを厳守してください**
- docs内のファイルを勝手に追加しないでください
- docs内のファイルを編集したり修正したりしないでください
- docs内のファイルの内容に関する変更は、ユーザーが明確に指示した場合のみ行ってください

**ただし、ユーザーが明確に指示した場合は以下が可能です：**
- docs内に新しいファイルを生成することができます
- docs内のファイルを書き換えることができます
- docs内のファイルを修正することができます
- docs内のファイルに追記することができます

## 説明方法について
- 説明は日本語で行ってください
- プログラミングの知識がない人にも理解できるように説明してください
- 専門用語をできるだけ省いて、わかりやすい言葉を使用してください
- 必要な場合は、例えや比喩を使って説明してください

## ドキュメント作成について
**重要：すべてのドキュメントは日本語で作成してください**
- マークダウンファイル（.md）は日本語で書く
- コメントやドキュメントの説明文は日本語で書く
- ファイル統計やレポートも日本語で書く
- 英語で書くと文字化けする可能性があるため、必ず日本語を使用する

**例外：**
- プログラムコード内の変数名や関数名は英語で問題ありません
- HTMLのタグやCSSのプロパティ名などの技術的な要素は英語のままで構いません

## アイコン使用について
**重要：UIやプログラム内では絵文字を使わず、SVGアイコンを使用してください**

### 理由
- **クロスプラットフォーム対応** - 絵文字は環境によって表示が異なる（Windows、Mac、Android、iOSで見た目が違う）
- **デザインの一貫性** - SVGアイコンは常に同じデザインで表示される
- **カスタマイズ性** - SVGはCSSで色やサイズを自由に変更できる
- **アクセシビリティ** - スクリーンリーダーに適切な情報を提供しやすい

### 実装方法
1. **インラインSVG** - HTMLに直接SVGコードを記述する（推奨）
2. **SVGスプライト** - 複数のアイコンをまとめて管理する場合
3. **アイコンフォント** - Font Awesome、Material Iconsなどを使用する場合

### SVGアイコンの例
```html
<!-- 良い例：SVGアイコン -->
<button class="header-btn">
    <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
</button>

<!-- 悪い例：絵文字 -->
<button class="header-btn">📅</button>
```

### CSSスタイリング
```css
.icon-svg {
    width: 20px;
    height: 20px;
    fill: currentColor;  /* 親要素の色を継承 */
    display: inline-block;
    vertical-align: middle;
}
```

**絵文字を使っても良い場合：**
- ドキュメント内の説明文（マークダウンファイルなど）
- コンソールログやデバッグメッセージ
- コメント内の視覚的な補助

## NG.md（実装してはいけない機能）について
**重要：以下のルールを絶対に守ってください**
- docs/NG.md に記載されている項目は絶対に実装してはいけません
- NG.md に記載されている機能は、ユーザーから明確な指示があっても実装してはいけません
- 開発を進める際は必ず NG.md を確認して、記載されていないか確認してください

## ルール記載について
**重要：すべての新しいルールは CLAUDE.md に必ず記載してください**

### ルールを記載する理由
- **プロジェクト変更時の継続性** - 別のプロジェクトに移った後、このプロジェクトに戻ってきた時にルールが保持される
- **新しいタブ・セッション対応** - 新しくタブを開いたり、セッションを開き直した時にルールが適用される
- **異なる Claude インスタンス対応** - 違う Claude に同じプロジェクトの作業を指示する時に、ルールが正しく引き継がれる

すべてのルール、設定、開発方針は CLAUDE.md に記載することで、どのような状況でもルールが一貫して適用されます。

## タスク進行時のタイムスタンプ記載について
**重要：タスクの進行状況を時刻で記録してください**

### タイムスタンプを記載するタイミング

#### 1. タスク開始時（Claude Code が記載）
- タスクの進行を開始する際に、タスクの説明の下に以下の形式で記載します
- **形式：** `開始：YYYY年MM月DD日 HH:mm`
- **例：** `開始：2025年10月22日 14:30`
- **重要：** ユーザーに毎回開始時刻を聞かない
  - ユーザーが自発的に時刻を提供した場合のみ記載する
  - それ以外の場合は時刻なしで「開始：2025年10月22日」のように記載する
  - **理由：** 毎回時刻を聞くのはユーザーの作業効率を妨げ、開発の流れを中断させるため

#### 2. タスク終了時（ユーザーが記載）
- タスクを完了した際に、タスクの説明の下に以下の形式で記載してください
- **形式：** `終了：YYYY年MM月DD日 HH:mm`
- **例：** `終了：2025年10月22日 15:45`
- **注意：** 終了時刻の記載はユーザーが行ってください。Claude Code は記載しません

### 記載する理由
- **進捗管理** - タスクにかかった時間を把握できる
- **スケジュール計画** - 今後の作業予測に活用できる
- **作業効率の分析** - どのタスクに時間がかかるかを可視化できる

**タスクを進める際は、開始時のタイムスタンプは Claude Code が記載し、終了時はユーザーが記載してください。ただし、ユーザーに開始時刻を毎回聞かないこと。**

## ユーザーが述べた理由や背景の記載について
**重要：ユーザーがプロンプト内で理由を述べた場合、その理由は必ず意味があります**

### 理由を記載する対象
ユーザーが以下のような場面で理由を述べた場合：
- 設計方針や構成について「〜なので」という理由
- 実装方法について「〜という理由で」という背景
- ファイル構成や命名について「〜するため」という目的
- ルールや制約について「〜だから」という根拠

### 記載先の選択

**docs フォルダのドキュメント（file.md など）に記載する場合：**
- その設計や構成の詳細な背景・目的を説明する

**CLAUDE.md に記載する場合：**
- 開発全体に影響する重要なルールや方針
- 複数のタスクに共通する指針

### 記載例

❌ **記載なし（良くない）：**
```
MVP フォルダを作成しました。
```

✅ **記載あり（良い）：**
```
MVP フォルダについて

### なぜ MVP フォルダを設置したのか

このプロジェクトは 2 つのフェーズで開発が進みます...
**そのため、MVP フォルダを作成して...**
```

### 記載する理由
- **将来の保守性** - なぜそう設計したのかを記録しておくと、後から見直すときに判断根拠が分かる
- **他者への説明** - チームメンバーや他の Claude インスタンスが見たときに、単なるルールではなく「なぜそうしているのか」が伝わる
- **判断の一貫性** - 理由が明確だと、今後の追加実装や修正時に同じ理由で判断できる

**ユーザーが理由を述べたときは、その理由をドキュメントに残すことを絶対に忘れないでください。**

## 時刻情報の記載について
**重要：時刻情報は正確に記載する必要があります。以下のルールを厳守してください**

### 時刻記載時のルール

1. **ユーザーが明示的に時刻を指定した場合**
   - その時刻をそのまま使用する
   - 例：ユーザーが「開始：2025年10月22日 09:00」と指示した場合、その時刻を記載

2. **env 環境変数に現在時刻が含まれている場合**
   - env の時刻情報を使用する
   - これが最も正確な情報源

3. **ユーザーの指示も env の時刻情報もない場合**
   - **他のドキュメントを参照して時刻を確認しない**
   - **時刻が不確定な場合は、ユーザーに確認を取る**
   - 推測や任意の選択は絶対に行わない

### 時刻記載の判断フロー

```
ユーザーが時刻を指定した？
  ↓
  YES → その時刻を使用
  ↓
  NO → env に時刻情報がある？
        ↓
        YES → env の時刻を使用
        ↓
        NO → ユーザーに確認を取る
             「現在時刻を教えてください」
```

### 記載例

❌ **推測で記載（良くない）：**
```
時刻情報の確認なく「開始：2025年10月22日 16:00」と記載
```

❌ **他のドキュメントから参照（良くない）：**
```
tasks2.md の時刻を参照して tasks3.md に同じ時刻を記載
（正確性が保証されない）
```

✅ **ユーザーの指示で記載（良い）：**
```
ユーザー：「開始時刻を09:00で記載してください」
→ 「開始：2025年10月22日 09:00」と記載
```

✅ **env の時刻を使用（良い）：**
```
env に「Today's date: 2025-10-22 14:30」と記載されている
→ その時刻を使用して記載
```

✅ **不確定な場合は確認（良い）：**
```
時刻情報がない場合は、ユーザーに確認を取る
ユーザーの回答に基づいて記載
```

### 記載する理由
- **正確性の確保** - 推測による誤りを完全に排除する
- **信頼性の向上** - ユーザーの指示または確認可能な情報に基づく
- **ドキュメント間の矛盾防止** - 各情報源を明確にすることで混乱を防ぐ

**時刻を記載する際は、ユーザーの指示または env の情報を活用し、推測や他ドキュメント参照は行わないでください。**
